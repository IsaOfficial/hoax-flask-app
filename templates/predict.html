<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <title>Prediksi Berita Hoaks</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="bg-light">
    <div class="container py-5">
      <div class="card shadow">
        <div class="card-body">
          <div class="text-center mb-4">
            <h4 class="fw-bold">
              Prediksi Berita Bahasa Indonesia (Model XGBoost + ROS)
            </h4>
            <p class="text-muted">
              Prediksi apakah berita yang dimasukkan adalah hoaks atau bukan
            </p>
          </div>

          <div class="mb-3">
            <textarea
              id="newsText"
              class="form-control"
              rows="6"
              placeholder="Masukkan teks berita di sini..."
            ></textarea>
          </div>

          <div class="d-grid">
            <button class="btn btn-primary" onclick="predict()">
              Prediksi
            </button>
          </div>

          <hr />

          <div id="result" class="mt-3 text-center" style="display: none">
            <h5>Hasil Prediksi:</h5>
            <p id="label" class="fw-bold"></p>
            <p>Probabilitas Hoaks: <span id="prob"></span></p>
          </div>
        </div>
      </div>
    </div>

    <script>
      async function predict() {
        const text = document.getElementById("newsText").value;

        const response = await fetch("/predict", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ text: text }),
        });

        const data = await response.json();

        document.getElementById("result").style.display = "block";

        if (data.prediction === 1) {
          document.getElementById("label").innerHTML =
            "<span class='text-danger'>HOAKS</span>";
        } else {
          document.getElementById("label").innerHTML =
            "<span class='text-success'>BERITA ASLI</span>";
        }

        document.getElementById("prob").innerText =
          (data.probability * 100).toFixed(2) + "%";
      }
    </script>
    {% include 'footer.html' %}
  </body>
</html>
